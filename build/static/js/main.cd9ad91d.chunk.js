(this.webpackJsonpliberameapp=this.webpackJsonpliberameapp||[]).push([[0],{67:function(e,t,a){e.exports=a(87)},87:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),l=a.n(r),c=a(25),u=a(18),i=a(13),s=a(88),m=a(119),E=a(120),g=a(121),d=a(122),p=a(123),I=a(125),f=a(43),O=f.initializeApp({apiKey:"AIzaSyCQhU_RJFHmG6thm_jB1uI2UexYjY-fvP4",authDomain:"liberameappp.firebaseapp.com",databaseURL:"https://liberameappp.firebaseio.com",projectId:"liberameappp",storageBucket:"liberameappp.appspot.com",messagingSenderId:"184965080963",appId:"1:184965080963:web:3fcba0cb8c2cda4cfef8b6",measurementId:"G-17VEXQF958"}),b=new f.auth.FacebookAuthProvider,v=new f.auth.GoogleAuthProvider,h=O.firestore(),A=a(124),S=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),r=(a[0],a[1]),l=Object(i.f)();Object(n.useEffect)((function(){var e=localStorage.getItem("g_try");localStorage.g_try&&"1"===e&&c()}),[]);var c=function(){O.auth().getRedirectResult().then((function(e){return E(e)})).catch((function(e){return m(e)}))},m=function(e){console.log("Error"),console.log(e)},E=function(t){var a=t.credential.accessToken;if(r(t),console.log("Login"),console.log(t),console.log(t.user),e.setLogged(!0),localStorage.setItem("l","1"),localStorage.removeItem("g_try"),t.credential){a=t.credential.accessToken;localStorage.setItem("token",a)}var n=t.user.displayName;localStorage.setItem("user",n),l.push("/")};return o.a.createElement("div",{className:"Sociallogin"},o.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),localStorage.setItem("g_try","1"),O.auth().signInWithRedirect(v).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},"Google login"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),localStorage.setItem("g_try","1"),O.auth().signInWithRedirect(b).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},"Facebook login"))},T=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),r=a[0],l=a[1],c=Object(n.useState)(""),m=Object(u.a)(c,2),E=m[0],g=m[1],d=Object(n.useState)(null),p=Object(u.a)(d,2),I=(p[0],p[1]),f=Object(i.f)(),b=function(e){console.log("Error"),console.log(e)},v=function(e){I(e),console.log("Login"),console.log(e);var t=e.email;localStorage.setItem("user",t),console.log(t),console.log("Usuario, login exitoso"),f.push("/")};return o.a.createElement("div",{className:"Auth"},o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(A.a,{label:"Usuario",variant:"outlined",name:"usuario",value:r,onChange:function(e){return l(e.target.value)}}),o.a.createElement("br",null),o.a.createElement(A.a,{type:"password",label:"Contrase\xf1a",variant:"outlined",name:"contrasena",value:E,onChange:function(e){return g(e.target.value)}}),o.a.createElement("br",null),o.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),O.auth().signInWithEmailAndPassword(r,E).then((function(e){return v(e)})).catch((function(e){return b(e)}))}},"Inicio de Sesi\xf3n Normal"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(S,{setLogged:e.setLogged}))},C=function(e){var t=Object(i.f)(),a=function(e){console.log("Error"),console.log(e)},n=function(a){console.log("Logout"),console.log(a),e.setLogged(!1),e.logout(),localStorage.removeItem("l"),t.push("/")};return o.a.createElement("div",{className:"Home"},o.a.createElement("br",null)," Logout",o.a.createElement("br",null),o.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){O.auth().signOut().then((function(e){return n(e)})).catch((function(e){return a(e)}))}},"\xbfDesea terminar la sesi\xf3n?"))},R=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),r=a[0],l=a[1],c=Object(n.useState)(""),s=Object(u.a)(c,2),m=s[0],E=s[1],g=Object(i.f)(),d=function(e){console.log("Error"),console.log(e)},p=function(e){console.log("Registration"),console.log(e),g.push("/")};return o.a.createElement("div",{className:"Auth"},o.a.createElement("div",null,"Usuario",o.a.createElement("br",null),o.a.createElement("input",{type:"text",name:"usuario",value:r,onChange:function(e){return l(e.target.value)}}),o.a.createElement("br",null),"Contrase\xf1a",o.a.createElement("br",null),o.a.createElement("input",{type:"password",name:"contrasena",value:m,onChange:function(e){return E(e.target.value)}}),o.a.createElement("br",null),o.a.createElement("input",{type:"submit",onClick:function(e){e.preventDefault(),O.auth().createUserWithEmailAndPassword(r,m).then((function(e){return p(e)})).catch((function(e){return d(e)}))},value:"enviar"})),o.a.createElement("div",null,"Firebase",o.a.createElement("br",null),o.a.createElement(S,{setLogged:e.setLogged})))},N=a(41),U="AUTENTICADO",_={INTENTO_SOLICITAR:{tipo:"INTENTO_SOLICITAR",nuevoEstado:"SOLICITANDO"},NO_SOLICITAR:{tipo:"NO_SOLICITAR",nuevoEstado:"MIRANDO"},SOLICITAR:{tipo:"SOLICITAR",nuevoEstado:"SOLICITADO"},AUTENTICAR:{tipo:"AUTENTICAR",nuevoEstado:U},TERMINAR_SESION:{tipo:"TERMINAR_SESION",nuevoEstado:"NO_AUTENTICADO"},SOLICITAR_TIPO_USUARIO:{tipo:"SOLICITAR_TIPO_USUARIO",nuevoEstado:"SIN_TIPO_USUARIO"},ASIGNAR_TIPO_USUARIO:{tipo:"ASIGNAR_TIPO_USUARIO",nuevoEstado:U}},L=function(){return o.a.createElement("div",{className:"Home"},o.a.createElement("br",null)," Home")},y=function(e){var t=Object(i.f)();return o.a.createElement("div",{className:"Home"},o.a.createElement("br",null)," Setusuario",o.a.createElement("br",null),o.a.createElement(m.a,{variant:"text",color:"primary","aria-label":"text primary button group"},o.a.createElement(s.a,{onClick:function(){h.collection("usuarios").doc(e.uid).set({tipo:"client"}),e.asignarTipoUsuario(),t.push("/Clients")}},"Client"),o.a.createElement(s.a,{onClick:function(){h.collection("usuarios").doc(e.uid).set({tipo:"plumber"}),e.asignarTipoUsuario(),t.push("/Plumbers")}},"Plumber")))},j=function(){return o.a.createElement("div",{className:"Plumbers"},o.a.createElement("br",null)," Plumbers")},k=function(){return o.a.createElement("div",{className:"Clients"},o.a.createElement("br",null)," Clients")},P=function(){return o.a.createElement("div",{className:"Admin"},o.a.createElement("br",null)," Admin")},w=function(e){var t=Object(i.f)(),a=function(e){t.push(e)};return!0===e.logeado?o.a.createElement("div",null,o.a.createElement(E.a,{color:"default",position:"static"},o.a.createElement(g.a,null,o.a.createElement(d.a,{edge:"start",color:"primary","aria-label":"menu",onClick:function(){return a("/")}},"Home ",o.a.createElement(I.a,null)),o.a.createElement(d.a,{color:"secondary","aria-label":"menu",onClick:function(){return a("/Logout")}},"Logout ",o.a.createElement(I.a,null)),o.a.createElement(d.a,{color:"secondary","aria-label":"menu",onClick:function(){return a("/Setusuario")}},"Set Tipo Usuario ",o.a.createElement(I.a,null)),o.a.createElement(d.a,{color:"secondary","aria-label":"menu",onClick:function(){return a("/Plumbers")}},"Plumbers ",o.a.createElement(I.a,null)),o.a.createElement(d.a,{color:"secondary","aria-label":"menu",onClick:function(){return a("/Clients")}},"Clients ",o.a.createElement(I.a,null)),o.a.createElement(p.a,{variant:"h6"},"Lib\xe9rameApp")))):o.a.createElement("div",null,o.a.createElement(E.a,{color:"default",position:"static"},o.a.createElement(g.a,null,o.a.createElement(d.a,{edge:"start",color:"primary","aria-label":"menu",onClick:function(){return a("/")}},"Home ",o.a.createElement(I.a,null)),o.a.createElement(d.a,{color:"secondary","aria-label":"menu",onClick:function(){return a("/Login")}},"Login ",o.a.createElement(I.a,null)),o.a.createElement(d.a,{color:"secondary","aria-label":"menu",onClick:function(){return a("/Registration")}},"Registration ",o.a.createElement(I.a,null)),o.a.createElement(d.a,{color:"secondary","aria-label":"menu",onClick:function(){return a("/Plumbers")}},"Plumbers ",o.a.createElement(I.a,null)),o.a.createElement(d.a,{color:"secondary","aria-label":"menu",onClick:function(){return a("/Clients")}},"Clients ",o.a.createElement(I.a,null)),o.a.createElement(p.a,{variant:"h6"},"Lib\xe9rameApp"))))},x=Object(N.b)((function(e){return{estado:e.estado,auth:e.auth}}),(function(e){return{intentoSolicitar:function(){return e({type:_.INTENTO_SOLICITAR.tipo,nuevoEstado:_.INTENTO_SOLICITAR.nuevoEstado})},noSolicitar:function(){return e({type:_.NO_SOLICITAR.tipo,nuevoEstado:_.NO_SOLICITAR.nuevoEstado})},login:function(){return e({type:_.AUTENTICAR.tipo,nuevoEstado:_.AUTENTICAR.nuevoEstado})},logout:function(){return e({type:_.TERMINAR_SESION.tipo,nuevoEstado:_.TERMINAR_SESION.nuevoEstado})},solicitarTipoUsuario:function(){return e({type:_.SOLICITAR_TIPO_USUARIO.tipo,nuevoEstado:_.SOLICITAR_TIPO_USUARIO.nuevoEstado})},asignarTipoUsuario:function(){return e({type:_.ASIGNAR_TIPO_USUARIO.tipo,nuevoEstado:_.ASIGNAR_TIPO_USUARIO.nuevoEstado})}}}))((function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],l=a[1],c=Object(n.useState)(""),m=Object(u.a)(c,2),E=m[0],g=m[1],d=Object(n.useState)(""),p=Object(u.a)(d,2),I=(p[0],p[1]),f=Object(i.f)();Object(n.useEffect)((function(){b(),I()}),[]);var b=function(){O.auth().onAuthStateChanged((function(t){t?(console.log("Authenticado ->"),g(O.auth().currentUser.uid),console.log(O.auth().currentUser),h.collection("usuarios").doc(O.auth().currentUser.uid).get().then((function(t){var a=t.data();void 0===a?(e.solicitarTipoUsuario(),l(!0)):(l(!0),e.login(),"client"===a?f.push("/Clients"):f.push("/Plumbers"))})).catch((function(e){return console.log(e)}))):(console.log("No authenticado"),console.log(O.auth().currentUser),l(!1))}))};return o.a.createElement("div",{className:"App"},o.a.createElement(w,{logeado:r}),o.a.createElement(s.a,null,e.auth),"SIN_TIPO_USUARIO"===e.auth&&o.a.createElement(y,{asignarTipoUsuario:e.asignarTipoUsuario,uid:E}),o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/",component:L}),o.a.createElement(i.a,{exact:!0,path:"/Home",component:L}),o.a.createElement(i.a,{exact:!0,path:"/Login",component:function(){return o.a.createElement(T,{setLogged:l,login:e.login})}}),o.a.createElement(i.a,{exact:!0,path:"/Logout",component:function(){return o.a.createElement(C,{setLogged:l,logout:e.logout})}}),o.a.createElement(i.a,{exact:!0,path:"/Registration",component:function(){return o.a.createElement(R,{setLogged:l})}}),o.a.createElement(i.a,{exact:!0,path:"/Plumbers",component:j}),o.a.createElement(i.a,{exact:!0,path:"/Clients",component:k}),o.a.createElement(i.a,{exact:!0,path:"/Admin",component:P}),o.a.createElement(i.a,{exact:!0,path:"/Setusuario",component:function(){return o.a.createElement(y,{uid:E})}})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(28);var G=Object(D.b)({estado:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"MIRANDO",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INTENTO_SOLICITAR":case"NO_SOLICITAR":case"SOLICITAR":return t.nuevoEstado;default:return e}},reservas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SOLICITAR":return t.solicitud;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NO_AUTENTICADO",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTENTICAR":case"TERMINAR_SESION":case"SOLICITAR_TIPO_USUARIO":case"ASIGNAR_TIPO_USUARIO":return t.nuevoEstado;default:return e}}}),H=Object(D.c)(G);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(N.a,{store:H},o.a.createElement(c.a,null,o.a.createElement(x,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[67,1,2]]]);
//# sourceMappingURL=main.cd9ad91d.chunk.js.map